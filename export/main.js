function ensureArray(e){return!1===Array.isArray(e)?[e]:e}function isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function emptyElement(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function emptyElements(e){(e=ensureArray(e)).forEach(e=>emptyElement(e))}const state=()=>{const e=[];let t=[...e];const r=e=>t.some(t=>t.id===e.id);return{get:()=>t,getField:e=>t.find(t=>t.id===e),addField:e=>{r(e)||t.push(e)},removeField:e=>{t=t.filter(t=>t.id!==e)},addFieldVals:(e,t)=>{if(r(e))for(let r in t)e[r]=t[r]},reset:()=>{t=[...e]}}},getUniqueId=(e,t)=>{const r=e.getAttribute("id");if(r)return r;{const r=generateId(t.generatedIdPrefix);return e.setAttribute("id",r),r}},generateId=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+Math.random().toString(10).substring(5)};function linear(e,t,r,n){return r*e/n+t}function easeInOutCubic(e,t,r,n){return(e/=n/2)<1?r/2*Math.pow(e,3)+t:r/2*(Math.pow(e-2,3)+2)+t}function easeOutCubic(e,t,r,n){return r*(Math.pow(e/n-1,3)+1)+t}function easeInCubic(e,t,r,n){return r*Math.pow(e/n,3)+t}const scrollTo=function(e){const t=60;let r,n,o,i,l,a=0;const s={element:null,position:null,duration:500,easing:"easeOut"};function u(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function d(){if(a<r){a++,u(Math.round(i(a,n,o,r))),window.requestAnimationFrame(d)}}!function(){l=Object.assign({},s,e);const a=function(){let e=l.element?l.element.offsetTop:l.position,t=Math.max(document.documentElement.clientHeight,window.innerHeight||0),r=Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)-t;return e>r&&(e=r),e}();window.requestAnimationFrame&&0!==l.duration?(n=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,r=Math.ceil(t*(l.duration/1e3)),o=a-n,i=function(){switch(l.easing){case"easeOut":return easeOutCubic;case"easeInOut":return easeInOutCubic;case"easeIn":return easeInCubic;default:return linear}}(),d()):u(a)}()},logError=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"log";console[r]("formValidation: "+e),null!==t&&console[r](t)},scrollToError=(e,t,r)=>{e&&scrollTo({element:e,duration:t,easing:r})},errors={invalidFormEl:"Form element not defined.",noRules:"No rules set.",noInputEls:"No input elements (input, select or textarea) found within field element.",noRuleSettings:'The rule "[ruleName]" does not return a settings object, and will not work properly.',missingRuleSettingsProperty:'The rule "[ruleName]" is missing the "[propertyName]" property in its settings object, and will not work properly.',missingRuleEvents:'The rule "[ruleName]" does not contain any events in its settings object, and will not work properly.',noRuleIsRelevantMethod:'The rule "[ruleName]" does not return an isRelevant method, and will not work properly.',noRuleValidateMethod:'The rule "[ruleName]" does not return a validate method, and will not work properly.'},checkFormIntegrity=(e,t)=>{e&&"FORM"===e.tagName||logError(errors.invalidFormEl),t.rules&&0===t.rules.length&&logError(errors.noRules)},checkFieldIntegrity=(e,t)=>{t&&0!==t.length||logError(errors.noInputEls,e)},checkRuleIntegrity=(e,t)=>{if(e.settings)if(e.settings.events&&0!==e.settings.events.length){["messageAttr","events"].forEach(r=>{if(!e.settings[r]){const e=errors.missingRuleSettingsProperty.replace("[propertyName]",r);logError(e.replace("[ruleName]",t))}})}else logError(errors.missingRuleEvents.replace("[ruleName]",t));else logError(errors.noRuleSettings.replace("[ruleName]",t));e.isRelevant||logError(errors.noRuleIsRelevantMethod.replace("[ruleName]",t)),e.validate||logError(errors.noRuleValidateMethod.replace("[ruleName]",t))},disableBrowserValidation=e=>{e.setAttribute("novalidate","novalidate")},renderErrorsEl=(e,t)=>{let r=e.querySelector("."+t.errorsClass);return r?r.classList.add(t.errorsClass):(e.insertAdjacentHTML("beforeend",'\n\t\t\t<div class="'.concat(t.errorsClass," ").concat(t.defaultErrorsClass,'"></div>\n\t\t')),r=e.querySelector("."+t.errorsClass)),r},renderValidationMessage=(e,t)=>{const r=e.rule.settings.messageAttr,n=e.field,o=[n.fieldEl.getAttribute(r),n.formEl.getAttribute(r),e.rule.settings.message,t.defaultErrorMessage];let i=getErrorMessage(o);customMessageProcessorIsSet(e)&&(i=e.rule.postprocessMessage(i,n)),n.errorsEl.insertAdjacentHTML("beforeend",'\n\t\t<div class="'.concat(t.errorClass,'">').concat(i,"</div>\n\t"))},customMessageProcessorIsSet=e=>e&&e.rule&&e.rule.postprocessMessage&&"function"==typeof e.rule.postprocessMessage,getErrorMessage=e=>e.find(e=>e&&e.length>0),formValidation=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=state();let n=[],o=Object.assign({},{rules:[],fieldSelector:".js-validation-field",inputsSelector:"input, select, textarea",errorsClass:"validation-field__errors",errorClass:"validation-field__error",hasErrorsClass:"has-errors",generatedIdPrefix:"js-validation-field--",inputParentFieldIdAttr:"data-validation-field-id",scrollToErrorOnSubmit:!0,scrollToSpeed:500,scrollToEasing:"easeIn",defaultErrorMessage:"Validation error.",disableFieldEventsOnSubmit:!1,onFormValidationStart:null,onFieldValidationStart:null,onFormValidationSuccess:null,onFieldValidationSuccess:null,onFormValidationError:null,onFieldValidationError:null},t);const i=t=>{(t=ensureArray(t)).forEach(t=>{const n=Array.from(t.querySelectorAll(o.inputsSelector)),i=getUniqueId(t,o);checkFieldIntegrity(t,n),n.forEach(e=>e.setAttribute(o.inputParentFieldIdAttr,i)),r.addField({id:i,formEl:e,fieldEl:t,inputEls:n,errorsEl:renderErrorsEl(t,o)}),r.addFieldVals(r.getField(i),{rules:l(r.getField(i))})})},l=e=>o.rules.map(t=>{const r="function"==typeof t?t():t;if(checkRuleIntegrity(r,t.name),r.isRelevant(e))return a(r),r}),a=t=>{t.settings.events.forEach(t=>{-1===n.indexOf(t)&&(n.push(t),e.addEventListener(t,s))})},s=t=>{if(r.get().length>0){const n=t.target;if(n===e){m(o.onFormValidationStart,{fields:r.get(),event:t}),t.preventDefault();const e=r.get().reduce((e,r)=>e.concat(u(r,t,o.disableFieldEventsOnSubmit)),[]);return Promise.all(e).then(e=>{if(e.every(e=>!0===e.valid))m(o.onFormValidationSuccess,{fields:r.get(),event:t},g);else{if(o.scrollToErrorOnSubmit){const t=e.find(e=>!1===e.valid).field.fieldEl;scrollToError(t,o.scrollToSpeed,o.scrollToEasing)}m(o.onFormValidationError,{fields:r.get(),event:t})}}).catch(e=>{m(o.onFormValidationError,{fields:r.get(),event:t})})}{const e=r.getField(n.getAttribute(o.inputParentFieldIdAttr));if(e)return Promise.all(u(e,t))}}},u=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m(o.onFieldValidationStart,{fields:ensureArray(e),event:t}),f(e),e.rules.filter(e=>e&&-1!==e.settings.events.indexOf(t.type)).map(n=>d(e,n,t,r))},d=(e,t,r,n)=>t.validate(e,r).then(o=>{const i={field:e,response:o,event:r,rule:t,disableEvent:n};return o.valid?c(i):p(i),o.field=e,o}).catch(e=>logError(e)),c=e=>{!0!==e.disableEvent&&m(o.onFieldValidationSuccess,{fields:ensureArray(e.field),event:e.event})},p=e=>{!0!==e.disableEvent&&(m(o.onFieldValidationError,{fields:ensureArray(e.field),event:e.event}),e.field.fieldEl.classList.add(o.hasErrorsClass),renderValidationMessage(e,o))},f=e=>{e.fieldEl.classList.remove(o.hasErrorsClass),emptyElements(e.errorsEl)},m=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null!==e?e(t):null!==r&&r(t.event)},g=()=>{e.submit()};return(()=>{o.defaultErrorsClass="validation-field__errors--default",checkFormIntegrity(e,o),disableBrowserValidation(e);const t=Array.from(e.querySelectorAll(o.fieldSelector));i(t)})(),{addFields:i,removeFields:e=>{(e=ensureArray(e)).forEach(e=>{let t=e;if(isElement(e)){e.classList.remove(o.hasErrorsClass);const r=e.querySelector("."+o.errorsClass);r&&(emptyElements(r),r.classList.contains(o.defaultErrorsClass)&&r.parentNode.removeChild(r)),t=e.getAttribute("id")}r.removeField(t)})},reset:()=>{r.reset()}}},pattern=e=>{let t=Object.assign({},{message:"Please match the field format.",messageAttr:"data-validation-pattern-message",events:["focusout","submit"]},e);return{settings:(()=>t)(),isRelevant:e=>e.inputEls.some(e=>null!==e.getAttribute("pattern")),validate:e=>new Promise(function(t,r){e.inputEls?t({valid:e.inputEls.some(e=>{const t=new RegExp(e.getAttribute("pattern"));return 0===e.value.length||e.value.length>0&&t.test(e.value)})}):r("pattern: No inputs set.")}),postprocessMessage:e=>t.postprocessMessage&&"function"==typeof t.postprocessMessage?t.postprocessMessage(e):e}},required=e=>{let t=Object.assign({},{message:"This field is required.",messageAttr:"data-validation-required-message",events:["focusout","submit"]},e);return{settings:t,isRelevant:function(e){return e.inputEls.some(e=>null!==e.getAttribute("required"))},validate:function(e){return new Promise(function(t,r){if(e.inputEls){const r=e.inputEls[0].getAttribute("type"),n="checkbox"===r||"radio"===r?"some":"every";t({valid:e.inputEls[n](e=>{const t=e.getAttribute("type");return"checkbox"===t||"radio"===t?!0===e.checked:e.value.length>0})})}else r("required: No inputs set.")})},postprocessMessage:function(e){return t.postprocessMessage&&"function"==typeof t.postprocessMessage?t.postprocessMessage(e):e}}},email=e=>{const t=Object.assign({},{message:"Please enter a valid email address.",messageAttr:"data-validation-email-message",pattern:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,events:["focusout","submit"]},e);return{settings:(()=>t)(),isRelevant:e=>e.inputEls.some(e=>"email"===e.getAttribute("type")),validate:e=>new Promise(function(r,n){e.inputEls?r({valid:e.inputEls.some(e=>0===e.value.length||e.value.length>0&&t.pattern.test(e.value))}):n("email: No inputs set.")}),postprocessMessage:e=>t.postprocessMessage&&"function"==typeof t.postprocessMessage?t.postprocessMessage(e):e}};function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}const minMaxLength=e=>{let t=_objectSpread({},{message:"Please enter a value between [minToken] and [maxToken] characters.",messageAttr:"data-validation-minmaxlength-message",minAttr:"data-minlength",maxAttr:"maxlength",minToken:"[minToken]",maxToken:"[maxToken]",events:["focusout","submit"]},e);function r(e){const r=e.getAttribute(t.minAttr);return null===r||e.value.length>=parseInt(r)}function n(e){const r=e.getAttribute(t.maxAttr);return null===r||e.value.length<=parseInt(r)}return{settings:t,isRelevant:function(e){return e.inputEls.some(e=>null!==e.getAttribute(t.minAttr)||null!==e.getAttribute(t.maxAttr))},validate:function(e){return new Promise((t,o)=>{e.inputEls?t({valid:e.inputEls.some(e=>0===e.value.length||r(e)&&n(e))}):o("minMaxLength: No inputs set.")})},postprocessMessage:function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.postprocessMessage&&"function"==typeof t.postprocessMessage)return t.postprocessMessage(e,t,o);const{minVal:i,maxVal:l}=function(e){let o=t.minToken,i=t.maxToken;if(e.inputEls){const l=e.inputEls.filter(e=>!r(e)||!n(e));l.length&&(o=l[0].getAttribute(t.minAttr),i=l[0].getAttribute(t.maxAttr))}return{minVal:o,maxVal:i}}(o);return e=(e=e.replace(t.minToken,i)).replace(t.maxToken,l)}}};var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var vanillaTextMask=createCommonjsModule(function(e,t){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.inputElement,r=(0,a.default)(e),n=function(e){var t=e.target.value;return r.update(t)};return t.addEventListener("input",n),r.update(t.value),{textMaskInputElement:r,destroy:function(){t.removeEventListener("input",n)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.conformToMask=void 0,t.maskInput=o;var i=r(2);Object.defineProperty(t,"conformToMask",{enumerable:!0,get:function(){return n(i).default}});var l=r(5),a=n(l);t.default=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.placeholderChar="_",t.strFunction="function"},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(0,o.isArray)(t)){if((void 0===t?"undefined":n(t))!==i.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");t=t(e,r),t=(0,o.processCaretTraps)(t).maskWithoutCaretTraps}var s=r.guide,u=void 0===s||s,d=r.previousConformedValue,c=void 0===d?a:d,p=r.placeholderChar,f=void 0===p?i.placeholderChar:p,m=r.placeholder,g=void 0===m?(0,o.convertMaskToPlaceholder)(t,f):m,v=r.currentCaretPosition,h=r.keepCharPositions,b=!1===u&&void 0!==c,E=e.length,y=c.length,S=g.length,C=t.length,A=E-y,M=A>0,k=v+(M?-A:0),I=k+Math.abs(A);if(!0===h&&!M){for(var T=a,V=k;V<I;V++)g[V]===f&&(T+=f);e=e.slice(0,k)+T+e.slice(k,E)}for(var F=e.split(a).map(function(e,t){return{char:e,isNew:t>=k&&t<I}}),x=E-1;x>=0;x--){var w=F[x].char;if(w!==f){var L=x>=k&&y===C;w===g[L?x-A:x]&&F.splice(x,1)}}var P=a,z=!1;e:for(var O=0;O<S;O++){var j=g[O];if(j===f){if(F.length>0)for(;F.length>0;){var q=F.shift(),R=q.char,N=q.isNew;if(R===f&&!0!==b){P+=f;continue e}if(t[O].test(R)){if(!0===h&&!1!==N&&c!==a&&!1!==u&&M){for(var _=F.length,D=null,H=0;H<_;H++){var Z=F[H];if(Z.char!==f&&!1===Z.isNew)break;if(Z.char===f){D=H;break}}null!==D?(P+=R,F.splice(D,1)):O--}else P+=R;continue e}z=!0}!1===b&&(P+=g.substr(O,S));break}P+=j}if(b&&!1===M){for(var U=null,B=0;B<P.length;B++)g[B]===f&&(U=B);P=null!==U?P.substr(0,U+1):a}return{conformedValue:P,meta:{someCharsRejected:z}}};var o=r(3),i=r(1),l=[],a=""},function(e,t,r){function n(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}Object.defineProperty(t,"__esModule",{value:!0}),t.convertMaskToPlaceholder=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.placeholderChar;if(!n(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(t))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is: "+JSON.stringify(t)+"\n\nThe mask that was received is: "+JSON.stringify(e));return e.map(function(e){return e instanceof RegExp?t:e}).join("")},t.isArray=n,t.isString=function(e){return"string"==typeof e||e instanceof String},t.isNumber=function(e){return"number"==typeof e&&void 0===e.length&&!isNaN(e)},t.processCaretTraps=function(e){for(var t=[],r=void 0;-1!==(r=e.indexOf(l));)t.push(r),e.splice(r,1);return{maskWithoutCaretTraps:e,indexes:t}};var o=r(1),i=[],l="[]"},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.previousConformedValue,o=void 0===t?n:t,i=e.previousPlaceholder,l=void 0===i?n:i,a=e.currentCaretPosition,s=void 0===a?0:a,u=e.conformedValue,d=e.rawValue,c=e.placeholderChar,p=e.placeholder,f=e.indexesOfPipedChars,m=void 0===f?r:f,g=e.caretTrapIndexes,v=void 0===g?r:g;if(0===s||!d.length)return 0;var h=d.length,b=o.length,E=p.length,y=u.length,S=h-b,C=S>0,A=0===b;if(S>1&&!C&&!A)return s;var M=0,k=void 0,I=void 0;if(!C||o!==u&&u!==p){var T=u.toLowerCase(),V=d.toLowerCase(),F=V.substr(0,s).split(n),x=F.filter(function(e){return-1!==T.indexOf(e)});I=x[x.length-1];var w=l.substr(0,x.length).split(n).filter(function(e){return e!==c}).length,L=p.substr(0,x.length).split(n).filter(function(e){return e!==c}).length,P=L!==w,z=void 0!==l[x.length-1]&&void 0!==p[x.length-2]&&l[x.length-1]!==c&&l[x.length-1]!==p[x.length-1]&&l[x.length-1]===p[x.length-2];!C&&(P||z)&&w>0&&p.indexOf(I)>-1&&void 0!==d[s]&&(k=!0,I=d[s]);for(var O=m.map(function(e){return T[e]}),j=O.filter(function(e){return e===I}).length,q=x.filter(function(e){return e===I}).length,R=p.substr(0,p.indexOf(c)).split(n).filter(function(e,t){return e===I&&d[t]!==e}).length,N=R+q+j+(k?1:0),_=0,D=0;D<y;D++){var H=T[D];if(M=D+1,H===I&&_++,_>=N)break}}else M=s-S;if(C){for(var Z=M,U=M;U<=E;U++)if(p[U]===c&&(Z=U),p[U]===c||-1!==v.indexOf(U)||U===E)return Z}else if(k){for(var B=M-1;B>=0;B--)if(u[B]===I||-1!==v.indexOf(B)||0===B)return B}else for(var G=M;G>=0;G--)if(p[G-1]===c||-1!==v.indexOf(G)||0===G)return G};var r=[],n=""},function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){document.activeElement===e&&(v?h(function(){return e.setSelectionRange(t,t,m)},0):e.setSelectionRange(t,t,m))}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){var t={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:t,update:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,a=n.inputElement,u=n.mask,m=n.guide,v=n.pipe,h=n.placeholderChar,b=void 0===h?p.placeholderChar:h,E=n.keepCharPositions,y=void 0!==E&&E,S=n.showMask,C=void 0!==S&&S;if(void 0===r&&(r=a.value),r!==t.previousConformedValue){(void 0===u?"undefined":l(u))===g&&void 0!==u.pipe&&void 0!==u.mask&&(v=u.pipe,u=u.mask);var A=void 0,M=void 0;if(u instanceof Array&&(A=(0,c.convertMaskToPlaceholder)(u,b)),!1!==u){var k=function(e){if((0,c.isString)(e))return e;if((0,c.isNumber)(e))return String(e);if(null==e)return f;throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value received was:\n\n "+JSON.stringify(e))}(r),I=a.selectionEnd,T=t.previousConformedValue,V=t.previousPlaceholder,F=void 0;if((void 0===u?"undefined":l(u))===p.strFunction){if(!1===(M=u(k,{currentCaretPosition:I,previousConformedValue:T,placeholderChar:b})))return;var x=(0,c.processCaretTraps)(M),w=x.maskWithoutCaretTraps,L=x.indexes;M=w,F=L,A=(0,c.convertMaskToPlaceholder)(M,b)}else M=u;var P={previousConformedValue:T,guide:m,placeholderChar:b,pipe:v,placeholder:A,currentCaretPosition:I,keepCharPositions:y},z=(0,d.default)(k,M,P),O=z.conformedValue,j=(void 0===v?"undefined":l(v))===p.strFunction,q={};j&&(!1===(q=v(O,i({rawValue:k},P)))?q={value:T,rejected:!0}:(0,c.isString)(q)&&(q={value:q}));var R=j?q.value:O,N=(0,s.default)({previousConformedValue:T,previousPlaceholder:V,conformedValue:R,placeholder:A,rawValue:k,currentCaretPosition:I,placeholderChar:b,indexesOfPipedChars:q.indexesOfPipedChars,caretTrapIndexes:F}),_=R===A&&0===N,D=C?A:f,H=_?D:R;t.previousConformedValue=H,t.previousPlaceholder=A,a.value!==H&&(a.value=H,o(a,N))}}}}};var a=r(4),s=n(a),u=r(2),d=n(u),c=r(3),p=r(1),f="",m="none",g="object",v="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),h="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout}])}),maskInput=unwrapExports(vanillaTextMask),vanillaTextMask_1=vanillaTextMask.vanillaTextMask;const ageCheck=e=>{const t=Object.assign({},{message:"You must be of age to proceed.",messageAttr:"data-validation-agecheck-message",events:["focusout","submit"],minAge:0},e);return{settings:t,isRelevant:function(e){return e.fieldEl.hasAttribute("data-agecheck")},validate:function(e){return new Promise(function(r,n){e.inputEls?r({valid:e.inputEls.some(r=>(function(e,t){const r=e.getDate(),n=e.getMonth(),o=e.getFullYear(),i=new Date,l=i.getDate(),a=i.getMonth(),s=i.getFullYear();return s-o>t||s-o===t&&a-n>0||s-o===t&&a-n==0&&l>=r})(function(e){const t=e.replace(/\D/g,""),r=t.substring(2,4),n=t.substring(0,2),o=t.substring(4,8);return new Date(o,n-1,r)}(r.value),function(e){const r=parseInt(e.getAttribute("data-agecheck-min-age"));return!isNaN(r)&&r>=0?r:t.minAge}(e.fieldEl)))}):n("ageCheck: No inputs set.")})},postprocessMessage:function(e){return t.postprocessMessage&&"function"==typeof t.postprocessMessage?t.postprocessMessage(e):e}}},multiSelectSelector="select[multiple]",radioSelector='input[type="radio"]',checkboxSelector='input[type="checkbox"]',fileSelector='input[type="file"]',defaultElementSelectors="input, select, textarea",defaults={elementSelectors:defaultElementSelectors,shouldStringify:!1};function getInputElements(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultElementSelectors;return[...e.querySelectorAll(t)]}function mapValues(e){const t={};for(const r of e)if(r.name)if(r.matches(checkboxSelector)){if(r.checked){const e=t[r.name]||[];t[r.name]=[...e,r.value]}}else r.matches(radioSelector)?r.checked&&(t[r.name]=r.value):r.matches(multiSelectSelector)?t[r.name]=[...r.options].filter(e=>e.selected).map(e=>e.value):r.matches(fileSelector)?t[r.name]=r.files:t[r.name]=r.value;return t}function getValues(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=_objectSpread({},defaults,t);let n={};if(e)if(e.tagName){const t=e.matches(defaultElementSelectors)?[e]:getInputElements(e,r.elementSelectors);t.length&&(n=mapValues(t))}else e.length&&(n=mapValues(e));return r.shouldStringify?JSON.stringify(n):n}var formMapper={getValues:getValues,getInputElements:getInputElements};const detectFormChanges=()=>{const e=[...document.querySelectorAll(".js-get-value")],t=formMapper.getValues(e,{shouldStringify:!0});let r=!1;return e.forEach(function(e){e.addEventListener("change",function(){r=!0})}),window.addEventListener("beforeunload",function(n){const o=formMapper.getValues(e,{shouldStringify:!0});!(t===o)&&r&&(n.preventDefault(),n.returnValue="Changes you made may not be saved.")}),{setDirty:function(e){r=e}}},formEl=document.querySelector(".js-signup-form"),anniversaryEl=formEl.querySelector(".js-anniversary-mask"),birthDateEl=formEl.querySelector(".js-birthdate-mask"),dateMask=[/\d/,/\d/,"/",/\d/,/\d/,"/",/\d/,/\d/,/\d/,/\d/],countrySelectEl=formEl.querySelector(".js-country-select"),countryHiddenInputEl=formEl.querySelector(".js-selected-country-val"),zipcodeFieldEl=formEl.querySelector(".js-zipcode-field"),zipcodeInputEl=zipcodeFieldEl.querySelector(".js-zipcode-input"),zipcodeLabelEl=zipcodeFieldEl.querySelector(".js-zipcode-label"),zipcodeLabelRequiredEl=zipcodeLabelEl.querySelector(".js-zipcode-label-required"),disabledLabel="label--disabled",optionalLabel="label--optional",requiredLabel="label--required",disabledInput="input--disabled";let formChanges,formValidationInstance;const disableFieldAndClearValue=()=>{zipcodeInputEl.value="",zipcodeInputEl.removeAttribute("placeholder"),zipcodeInputEl.setAttribute("disabled",!0),zipcodeLabelRequiredEl.classList.remove(requiredLabel),zipcodeLabelRequiredEl.classList.add(optionalLabel),zipcodeLabelEl.classList.add(disabledLabel),zipcodeInputEl.classList.add(disabledInput),formValidationInstance.removeFields(zipcodeFieldEl),zipcodeInputEl.required=!1,zipcodeInputEl.setAttribute("aria-required",!1)},enableField=(e,t)=>{zipcodeInputEl.removeAttribute("disabled"),zipcodeLabelRequiredEl.classList.add(requiredLabel),zipcodeLabelRequiredEl.classList.remove(optionalLabel),zipcodeLabelEl.classList.remove(disabledLabel),zipcodeInputEl.classList.remove(disabledInput),zipcodeInputEl.required=!0,zipcodeInputEl.setAttribute("aria-required",!0),formValidationInstance.addFields(zipcodeFieldEl),"US"===e?(zipcodeInputEl.setAttribute("data-minlength","5"),zipcodeInputEl.setAttribute("maxlength","5"),zipcodeInputEl.setAttribute("placeholder","00000"),t&&(zipcodeInputEl.value="")):(zipcodeInputEl.removeAttribute("data-minlength"),zipcodeInputEl.removeAttribute("placeholder"),zipcodeInputEl.setAttribute("maxlength","20"),formValidationInstance.removeFields(zipcodeFieldEl),formValidationInstance.addFields(zipcodeFieldEl),zipcodeInputEl.value="")},onCountrySelectChange=(e,t)=>{requiredZipCountries.includes(e)?enableField(e,t):(zipcodeInputEl.value="",zipcodeInputEl.removeAttribute("placeholder"),zipcodeInputEl.setAttribute("disabled",!0),zipcodeLabelRequiredEl.classList.remove(requiredLabel),zipcodeLabelRequiredEl.classList.add(optionalLabel),zipcodeLabelEl.classList.add(disabledLabel),zipcodeInputEl.classList.add(disabledInput),formValidationInstance.removeFields(zipcodeFieldEl),zipcodeInputEl.required=!1,zipcodeInputEl.setAttribute("aria-required",!1))},requiredZipCountries=["US","AT","BE","BG","CT","CZ","DK","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","GB"],getCurrentCountryValue=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=countrySelectEl.value;onCountrySelectChange(t,e)},init=()=>{onPageLoadSetCountryValue(),initValidation(),initMasking(),formChanges=detectFormChanges(),getCurrentCountryValue(!1),countrySelectEl.addEventListener("change",getCurrentCountryValue)},onPageLoadSetCountryValue=()=>{countrySelectEl.value=countryHiddenInputEl.value},initValidation=()=>{const e={rules:[pattern({message:"Please enter a valid date."}),required,minMaxLength,email,ageCheck({minAge:21})],onFormValidationError:()=>{formChanges.setDirty(!0)},onFormValidationSuccess:()=>{formChanges.setDirty(!1),formEl.submit()}};formValidationInstance=formValidation(formEl,e)},initMasking=()=>{birthDateEl&&maskInput({inputElement:birthDateEl,mask:dateMask}),anniversaryEl&&maskInput({inputElement:anniversaryEl,mask:dateMask})};onPageLoadSetCountryValue(),initValidation(),initMasking(),formChanges=detectFormChanges(),getCurrentCountryValue(!1),countrySelectEl.addEventListener("change",getCurrentCountryValue);
